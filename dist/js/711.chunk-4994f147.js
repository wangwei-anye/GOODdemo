"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[711],{39711:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K}),n(80176);var a=n(2307),l=(n(20818),n(70302)),r=(n(52262),n(65400)),c=(n(44336),n(74253)),i=(n(35246),n(74806)),m=(n(12438),n(89552)),s=n(29439),o=(n(67272),n(51024)),u=(n(85175),n(20838)),d=n(67294),E=n(39704),p=n(29934),f=n(15671),y=n(43144),v=n(60136),h=n(82963),x=n(61120);var N=function(e){(0,v.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,x.Z)(t);if(n){var l=(0,x.Z)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,h.Z)(this,e)});function l(){return(0,f.Z)(this,l),a.apply(this,arguments)}return(0,y.Z)(l,[{key:"render",value:function(){var e=Object.assign({},{textAlign:"center",margin:"30px"},this.props.style),t=this.props.tip||"加载中...";return d.createElement("div",{style:e},d.createElement(m.default,{tip:t}))}}]),l}(d.Component),g=n(7085),b=n(38819),k=n(43061),Z=n(57254),z=n(8812),S=n(25782),C=n(46561),I=n(15360),w=n(73171),T=n(59879),R=n(11075),F=n(58061),A=n(5164),B=n(55008),L=u.default.TabPane,O=o.default.Search,D=d.createElement(g.Z,{style:{marginLeft:"5px",fontSize:16,color:"rgba(0,0,0,0.85)"},spin:!0});const K=function(){var e=(0,E.I0)(),t=(0,d.useState)("1"),n=(0,s.Z)(t,2),o=n[0],f=n[1],y=(0,d.useState)(1),v=(0,s.Z)(y,2),h=v[0],x=v[1],g=(0,E.v9)(B.Mx),K=g.loading,P=g.listData,Q=[{title:"任务名称",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"测试案例总数",key:"testNum",render:function(e){return d.createElement("span",null,e.children?e.children.length:"1")}},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"运行状态",key:"state",render:function(e){return d.createElement("span",null,A.sm[e.state],e.children&&e.state===A.OZ?d.createElement(m.default,{indicator:D}):null)}},{title:"运行进度",key:"state",width:"200px",render:function(e){return d.createElement(d.Fragment,null,e.children?d.createElement("span",null,d.createElement(i.Z,{percent:(e.completeNum+e.errorNum)/e.totalNum*100})):null)}},{title:"算法",dataIndex:"algorithm",key:"algorithm"}],j=[{title:"任务名称",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},,{title:"通过/总数",key:"createTime",render:function(e){return d.createElement(d.Fragment,null,e.children?d.createElement("span",{className:["u-status",0===e.completeNum?"status-error":e.completeNum===e.totalNum?"status-complete":"status-part-complete"].join(" ")},e.completeNum+"/"+e.totalNum):d.createElement("span",null,e.state==A.xQ||e.state==A.xw?d.createElement(b.Z,{style:{color:"rgb(126, 211, 39)",fontSize:18}}):d.createElement(k.Z,{style:{color:"#ff0000",fontSize:18}})))}},,{title:"通过率",key:"passPer",render:function(e){return d.createElement(d.Fragment,null,e.children?d.createElement("span",null,parseFloat(100*e.completeNum/e.totalNum).toFixed(2)+"%"):null)}},{title:"开始时间",dataIndex:"startTime",key:"startTime"},{title:"结束时间",dataIndex:"endTime",key:"endTime"},{title:"状态",key:"state",render:function(e){return d.createElement("span",null,A.sm[e.state])}},{title:"回放",key:"play",render:function(e){return d.createElement(d.Fragment,null,e.playback?d.createElement("span",{onClick:function(){M(e.playback)}},d.createElement(p.Z,{style:{fontSize:24,cursor:"pointer",color:"green"}})):null)}},{title:"算法",dataIndex:"algorithm",key:"algorithm"}],M=function(e){window.open("/play?fileUrl=".concat(e))};(0,d.useEffect)((function(){q(1)}),[o]);var U=function(e){x(e),q(e)},Y=function(){x(1),q(1)},q=function(t){e((0,B.vy)()),e((0,B.Yu)({current:t,size:F.L8,state:"1"===o?A.OZ:A.xQ}))},G=function(e){return console.log(e)},H={expandIcon:function(e){var t=e.expanded,n=e.onExpand,a=e.record;return a.children?t?d.createElement(Z.Z,{style:{marginRight:"10px"},onClick:function(e){return n(a,e)}}):d.createElement(z.Z,{style:{marginRight:"10px"},onClick:function(e){return n(a,e)}}):null}};return d.createElement("div",{className:"task-wrap"},d.createElement(u.default,{defaultActiveKey:o,onChange:function(e){x(1),f(e)}},d.createElement(L,{tab:"正在测试",key:"1"},d.createElement(l.Z,{className:"search-box",bordered:!1},d.createElement("div",{className:"search-box"},d.createElement("div",{className:"tips-box"},d.createElement("div",{className:"box"},d.createElement("div",{className:"txt"},"测试中"),d.createElement("div",{className:"num"},P.doingNum)),d.createElement(c.Z,{type:"vertical",className:"divider"}),d.createElement("div",{className:"box"},d.createElement("div",{className:"txt"},"排队中"),d.createElement("div",{className:"num"},P.totalQueue))),d.createElement("div",{className:"item-list"},d.createElement("div",{className:"item"},d.createElement(r.default,{type:"primary",disabled:!0,icon:d.createElement(S.Z,null),size:20}),d.createElement("div",null,"开始")),d.createElement("div",{className:"item"},d.createElement(r.default,{type:"primary",disabled:!0,icon:d.createElement(C.Z,null),size:20}),d.createElement("div",null,"暂停")),d.createElement("div",{className:"item"},d.createElement(r.default,{type:"primary",disabled:!0,icon:d.createElement(I.Z,null),size:20}),d.createElement("div",null,"停止")),d.createElement("div",{className:"item"},d.createElement(r.default,{type:"primary",disabled:!0,icon:d.createElement(w.Z,null),size:20}),d.createElement("div",null,"删除")),d.createElement("div",{className:"item"},d.createElement(r.default,{type:"primary",onClick:Y,icon:d.createElement(T.Z,null),size:20}),d.createElement("div",null,"刷新"))),d.createElement("div",{className:"input-box"},d.createElement(O,{onSearch:G,enterButton:!0})))),d.createElement(l.Z,{bordered:!1},K?d.createElement(N,null):null,!K&&P.records.length>0?d.createElement(a.Z,{dataSource:P.records,pagination:{current:h,pageSize:F.L8,position:["bottomCenter"],total:P.total,onChange:U,showSizeChanger:!1},defaultExpandAllRows:!0,indentSize:23,expandable:H,rowKey:"id",columns:Q}):null)),d.createElement(L,{tab:"已完成",key:"2"},d.createElement(l.Z,{className:"search-box",bordered:!1},d.createElement("div",{className:"search-box"},d.createElement("div",{className:"item-list item-list2"},d.createElement("div",{className:"item"},d.createElement(r.default,{type:"primary",disabled:!0,icon:d.createElement(R.Z,null),size:20}),d.createElement("div",null,"重测")),d.createElement("div",{className:"item"},d.createElement(r.default,{type:"primary",disabled:!0,icon:d.createElement(w.Z,null),size:20}),d.createElement("div",null,"删除")),d.createElement("div",{className:"item"},d.createElement(r.default,{type:"primary",onClick:Y,icon:d.createElement(T.Z,null),size:20}),d.createElement("div",null,"刷新"))),d.createElement("div",{className:"input-box"},d.createElement(O,{onSearch:G,enterButton:!0})))),d.createElement(l.Z,{bordered:!1},K?d.createElement(N,null):null,!K&&P.records.length>0?d.createElement(a.Z,{dataSource:P.records,pagination:{current:h,pageSize:F.L8,position:["bottomCenter"],total:P.total,onChange:U,showSizeChanger:!1},indentSize:23,defaultExpandAllRows:!0,expandable:H,rowKey:"id",columns:j}):null))))}}}]);