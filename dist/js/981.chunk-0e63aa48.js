(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[981],{61820:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>F});var r=n(15861),a=n(15671),o=n(43144),l=n(97326),i=n(60136),c=n(82963),s=n(61120),u=n(4942),d=n(87757),m=n.n(d),f=n(67294),g=n(26243),p=n(44898),h=(n(97253),n(62112)),y=n(34329),v=n(24088),E=p.gT.sedan({length:4.3,width:2.2,height:1.5,color:[255,215,0]}),w={"/tracklets/objects":[{name:"selected",style:{fill_color:"#ff8000aa"}}],"/lidar/points":[{style:{point_color_mode:"ELEVATION"}}]},Z=n(77554),O=n(96486),b=n.n(O),k=n(80129),S=n.n(k);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,g.B4)().TIMESTAMP_FORMAT;var j=n(35457).Z,C=0,D=!1,R=!1;const F=function(e){(0,i.Z)(g,e);var t,n,d=(t=g,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.Z)(t);if(n){var a=(0,s.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function g(){var e;(0,a.Z)(this,g);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=d.call.apply(d,[this].concat(n)),(0,u.Z)((0,l.Z)(e),"state",{log:j,loading:!1,mapData:{solidLines:[],dashedLines:[]},reRenderFlag:!1,settings:{viewMode:"PERSPECTIVE",showTooltip:!1}}),(0,u.Z)((0,l.Z)(e),"getData",(0,r.Z)(m().mark((function t(){var n,r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),n=S().parse(b().split(window.location.search,"?")[1]),t.next=4,(0,Z.Z)(n.mapUrl);case 4:r=t.sent,console.log("map load"),R=!0,r&&e.setState({mapData:r}),e.ready();case 9:case"end":return t.stop()}}),t)})))),(0,u.Z)((0,l.Z)(e),"ready",(function(){if(R&&D){e.setState({loading:!1});var t=setInterval((function(){C++,console.log("click"),document.getElementsByClassName("css-1eupenj")&&document.getElementsByClassName("css-1eupenj").length>0&&(document.getElementsByClassName("css-1eupenj")[0].click(),clearInterval(t)),C>5&&clearInterval(t)}),1e3)}})),(0,u.Z)((0,l.Z)(e),"renderLayer",(function(e){return[new h.Z({coordinateSystem:v.Df.METER_OFFSETS,coordinateOrigin:[0,0,0],id:"path-layer-solid",widthUnits:"pixels",rounded:!0,data:e.solidLines,getColor:function(e){return[255,0,0]},getTooltip:function(e){return"1111111"}}),new h.Z({coordinateSystem:v.Df.METER_OFFSETS,coordinateOrigin:[0,0,0],id:"path-layer-broken",widthUnits:"pixels",rounded:!0,data:e.brokenLines,getColor:function(e){return[0,0,255]},getDashArray:[80,180],dashJustified:!0,extensions:[new y.Z({dash:!0,highPrecisionDash:!0})]})]})),(0,u.Z)((0,l.Z)(e),"_onSettingsChange",(function(t){e.setState({settings:T(T({},e.state.settings),t)})})),(0,u.Z)((0,l.Z)(e),"onPlay",(function(t){Number(t)<.2&&e.setState({reRenderFlag:!e.state.reRenderFlag})})),e}return(0,o.Z)(g,[{key:"componentDidMount",value:function(){var e=this;this.state.log.on("ready",(function(){console.log("ready"),D=!0,e.ready()})).on("error",console.error).connect(),this.getData()}},{key:"render",value:function(){var e=this.state,t=e.log,n=e.settings,r=e.mapData,a=e.loading,o=this.renderLayer(r);return f.createElement("div",{className:"play-wrap"},a?f.createElement("div",{className:"loading-mask"},f.createElement("div",null,"资源加载中，请稍等。。。")):null,f.createElement("div",{id:"play-container"},f.createElement("div",{id:"control-panel"},f.createElement(p.Hk,{log:t,name:"Metrics"}),f.createElement("hr",null),f.createElement(p.Hk,{log:t,name:"Camera"}),f.createElement("hr",null)),f.createElement("div",{id:"log-panel"},f.createElement("div",{id:"map-view",style:{backgroundColor:"lightgray"}},f.createElement(p.nU,{log:t,car:E,xvizStyles:w,showTooltip:n.showTooltip,viewMode:p.WF[n.viewMode],showMap:!1,customLayers:o}),f.createElement("div",{id:"hud"},f.createElement(p.o9,{log:t,streamName:"/vehicle/turn_signal"}),f.createElement("hr",null),f.createElement(p.Oo,{log:t,streamName:"/vehicle/traffic_light"}),f.createElement("hr",null),f.createElement(p.oi,{log:t,streamName:"/vehicle/acceleration",style:{arcRadius:50},label:"Acceleration",min:-4,max:4}),f.createElement("hr",null),f.createElement(p.oi,{log:t,streamName:"/vehicle/velocity",label:"Speed",getWarning:function(e){return e>6?"FAST":""},min:0,max:20}))),f.createElement("div",{id:"timeline"},f.createElement(p.ko,{width:"100%",log:t,onSeek:this.onPlay,formatTimestamp:function(e){return e}})))))}}]),g}(f.PureComponent)},35457:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(44898),a=n(58061),o=n(96486),l=n.n(o),i=n(80129),c=n.n(i)().parse(l().split(window.location.search,"?")[1]);const s=new r.Po({logGuid:c.fileUrl?c.fileUrl:"none",bufferLength:300,duration:60,serverConfig:{serverUrl:a.LF},worker:!0,maxConcurrency:4})},27639:()=>{},66858:()=>{},69944:()=>{},27603:()=>{}}]);