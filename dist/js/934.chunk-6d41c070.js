"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[934],{17934:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M}),n(80176);var a=n(2307),l=(n(20818),n(70302)),r=(n(52262),n(65400)),c=(n(44336),n(74253)),i=(n(19373),n(11187)),s=n(15861),o=(n(35246),n(74806)),u=(n(12438),n(89552)),m=n(29439),d=(n(67272),n(51024)),p=(n(85175),n(20838)),E=n(87757),f=n.n(E),y=n(67294),v=n(39704),h=n(29934),x=n(15671),g=n(43144),k=n(60136),b=n(82963),Z=n(61120);var C=function(e){(0,k.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,Z.Z)(t);if(n){var l=(0,Z.Z)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,b.Z)(this,e)});function l(){return(0,x.Z)(this,l),a.apply(this,arguments)}return(0,g.Z)(l,[{key:"render",value:function(){var e=Object.assign({},{textAlign:"center",margin:"30px"},this.props.style),t=this.props.tip||"加载中...";return y.createElement("div",{style:e},y.createElement(u.default,{tip:t}))}}]),l}(y.Component),N=n(7085),S=n(38819),z=n(43061),w=n(57254),I=n(8812),R=n(25782),T=n(46561),F=n(15360),D=n(73171),A=n(59879),B=n(11075),K=n(58061),L=n(20577),P=n(15630),j=p.default.TabPane,O=d.default.Search,Y=y.createElement(N.Z,{style:{marginLeft:"5px",fontSize:16,color:"rgba(0,0,0,0.85)"},spin:!0});const M=function(){var e=(0,v.I0)(),t=(0,y.useState)([]),n=(0,m.Z)(t,2),d=n[0],E=n[1],x=(0,y.useState)("1"),g=(0,m.Z)(x,2),k=g[0],b=g[1],Z=(0,y.useState)(1),N=(0,m.Z)(Z,2),M=N[0],U=N[1],$=(0,v.v9)(L.Mx),q=$.loading,G=$.listData,H=[{title:"任务名称",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"测试案例总数",key:"testNum",render:function(e){return y.createElement("span",null,e.children?e.children.length:"1")}},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"运行状态",key:"state",render:function(e){return y.createElement("span",null,e.state.alias,e.children&&e.testDoneCount<e.sumCount?y.createElement(u.default,{indicator:Y}):null)}},{title:"运行进度",key:"state",width:"200px",render:function(e){return y.createElement(y.Fragment,null,e.children?y.createElement("span",null,y.createElement(o.Z,{percent:e.testDoneCount/e.sumCount*100})):null)}},{title:"算法",dataIndex:"algorithm",key:"algorithm"}],J=[{title:"任务名称",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},,{title:"通过/总数",key:"createTime",render:function(e){return y.createElement(y.Fragment,null,e.children?y.createElement("span",{className:["u-status",0===e.passCount?"status-error":e.passCount===e.sumCount?"status-complete":"status-part-complete"].join(" ")},e.passCount+"/"+e.sumCount):y.createElement("span",null,1==e.isPass?y.createElement(S.Z,{style:{color:"rgb(126, 211, 39)",fontSize:18}}):y.createElement(z.Z,{style:{color:"#ff0000",fontSize:18}})))}},,{title:"通过率",key:"passPer",render:function(e){return y.createElement(y.Fragment,null,e.children?y.createElement("span",null,parseFloat(100*e.passCount/e.sumCount).toFixed(2)+"%"):null)}},{title:"开始时间",dataIndex:"startTime",key:"startTime"},{title:"结束时间",dataIndex:"endTime",key:"endTime"},{title:"状态",key:"state",render:function(e){return y.createElement("span",null,e.state.alias)}},{title:"回放",key:"play",render:function(e){return y.createElement(y.Fragment,null,e.playback?y.createElement("span",{onClick:function(){Q(e.playback)}},y.createElement(h.Z,{style:{fontSize:24,cursor:"pointer",color:"green"}})):null)}},{title:"算法",dataIndex:"algorithm",key:"algorithm"}],Q=function(e){window.open("/play?fileUrl=".concat(e))};(0,y.useEffect)((function(){X(1)}),[k]),(0,y.useEffect)((function(){var e;return"1"===k&&(e=setInterval((function(){X(M,!1)}),1e4)),function(){clearInterval(e)}}),[k]);var V=function(e){U(e),X(e)},W=function(){U(1),X(1)},X=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n&&e((0,L.vy)()),e((0,L.Yu)({current:t,size:K.L8,state:"1"===k?1:2}))},_=function(e){return console.log(e)},ee={expandIcon:function(e){var t=e.expanded,n=e.onExpand,a=e.record;return a.children?t?y.createElement(w.Z,{style:{marginRight:"10px"},onClick:function(e){return n(a,e)}}):y.createElement(I.Z,{style:{marginRight:"10px"},onClick:function(e){return n(a,e)}}):null}},te=function(){var e=(0,s.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==d.length){e.next=3;break}return i.default.info("请选择案例"),e.abrupt("return");case 3:return e.next=5,(0,P.$Y)({ids:d.join(",")});case 5:200===e.sent.data.code&&(i.default.success("删除成功!"),E([]),W());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne={checkStrictly:!1,selectedRowKeys:d,onChange:function(e){E(e)}};return y.createElement("div",{className:"task-wrap"},y.createElement(p.default,{defaultActiveKey:k,onChange:function(e){U(1),b(e)}},y.createElement(j,{tab:"正在测试",key:"1"},y.createElement(l.Z,{className:"search-box",bordered:!1},y.createElement("div",{className:"search-box"},y.createElement("div",{className:"tips-box"},y.createElement("div",{className:"box"},y.createElement("div",{className:"txt"},"测试中"),y.createElement("div",{className:"num"},G.testingCount)),y.createElement(c.Z,{type:"vertical",className:"divider"}),y.createElement("div",{className:"box"},y.createElement("div",{className:"txt"},"排队中"),y.createElement("div",{className:"num"},G.pendingCount))),y.createElement("div",{className:"item-list"},y.createElement("div",{className:"item"},y.createElement(r.default,{type:"primary",disabled:!0,icon:y.createElement(R.Z,null),size:20}),y.createElement("div",null,"开始")),y.createElement("div",{className:"item"},y.createElement(r.default,{type:"primary",disabled:!0,icon:y.createElement(T.Z,null),size:20}),y.createElement("div",null,"暂停")),y.createElement("div",{className:"item"},y.createElement(r.default,{type:"primary",disabled:!0,icon:y.createElement(F.Z,null),size:20}),y.createElement("div",null,"停止")),y.createElement("div",{className:"item"},y.createElement(r.default,{type:"primary",onClick:te,icon:y.createElement(D.Z,null),size:20}),y.createElement("div",null,"删除")),y.createElement("div",{className:"item"},y.createElement(r.default,{type:"primary",onClick:W,icon:y.createElement(A.Z,null),size:20}),y.createElement("div",null,"刷新"))),y.createElement("div",{className:"input-box"},y.createElement(O,{onSearch:_,enterButton:!0})))),y.createElement(l.Z,{bordered:!1},q?y.createElement(C,null):null,!q&&G.records.length>0?y.createElement(a.Z,{rowSelection:ne,dataSource:G.records,pagination:{current:M,pageSize:K.L8,position:["bottomCenter"],total:G.total,onChange:V,showSizeChanger:!1},defaultExpandAllRows:!0,indentSize:23,expandable:ee,rowKey:"id",columns:H}):null)),y.createElement(j,{tab:"已完成",key:"2"},y.createElement(l.Z,{className:"search-box",bordered:!1},y.createElement("div",{className:"search-box"},y.createElement("div",{className:"item-list item-list2"},y.createElement("div",{className:"item"},y.createElement(r.default,{type:"primary",disabled:!0,icon:y.createElement(B.Z,null),size:20}),y.createElement("div",null,"重测")),y.createElement("div",{className:"item"},y.createElement(r.default,{type:"primary",onClick:te,icon:y.createElement(D.Z,null),size:20}),y.createElement("div",null,"删除")),y.createElement("div",{className:"item"},y.createElement(r.default,{type:"primary",onClick:W,icon:y.createElement(A.Z,null),size:20}),y.createElement("div",null,"刷新"))),y.createElement("div",{className:"input-box"},y.createElement(O,{onSearch:_,enterButton:!0})))),y.createElement(l.Z,{bordered:!1},q?y.createElement(C,null):null,!q&&G.records.length>0?y.createElement(a.Z,{rowSelection:ne,dataSource:G.records,pagination:{current:M,pageSize:K.L8,position:["bottomCenter"],total:G.total,onChange:V,showSizeChanger:!1},indentSize:23,defaultExpandAllRows:!0,expandable:ee,rowKey:"id",columns:J}):null))))}}}]);