(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[981],{61820:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>C});var r=n(15861),a=n(15671),l=n(43144),o=n(97326),c=n(60136),i=n(82963),s=n(61120),u=n(4942),m=n(87757),d=n.n(m),f=n(67294),p=(n(26243),n(7823)),g=p.gT.sedan({length:4.3,width:2.2,height:1.5,color:[30,144,255,255]}),h={"/tracklets/objects":[{name:"selected",style:{fill_color:"#ff8000aa"}}],"/lidar/points":[{style:{point_color_mode:"ELEVATION"}}]},v=n(77554),y=n(15231),E=n(58061),w=n(96486),b=n.n(w),Z=n(80129),k=n.n(Z);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=n(35457).Z,x=0,N=!1,S=!1;const C=function(e){(0,c.Z)(w,e);var t,n,m=(t=w,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.Z)(t);if(n){var a=(0,s.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,i.Z)(this,e)});function w(){var e;(0,a.Z)(this,w);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return e=m.call.apply(m,[this].concat(n)),(0,u.Z)((0,o.Z)(e),"state",{log:P,loading:!1,mapData:{solidLines:[],dashedLines:[]},reRenderFlag:!1,settings:{viewMode:"PERSPECTIVE",showTooltip:!1}}),(0,u.Z)((0,o.Z)(e),"getData",(0,r.Z)(d().mark((function t(){var n,r,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),n=k().parse(b().split(window.location.search,"?")[1]),t.next=4,fetch("".concat(E.xG,"/download/replay/").concat(n.fileUrl)).then((function(e){return e.text()})).then((function(e){return JSON.parse(e).MapFileName}));case 4:return r=t.sent,t.next=7,(0,v.Z)(r);case 7:a=t.sent,console.log("map load"),S=!0,a&&e.setState({mapData:a}),e.ready();case 12:case"end":return t.stop()}}),t)})))),(0,u.Z)((0,o.Z)(e),"ready",(function(){if(S&&N){e.setState({loading:!1});var t=setInterval((function(){x++,console.log("click"),document.getElementsByClassName("css-1eupenj")&&document.getElementsByClassName("css-1eupenj").length>0&&(document.getElementsByClassName("css-1eupenj")[0].click(),clearInterval(t)),x>5&&clearInterval(t)}),1e3)}})),(0,u.Z)((0,o.Z)(e),"_onSettingsChange",(function(t){e.setState({settings:j(j({},e.state.settings),t)})})),(0,u.Z)((0,o.Z)(e),"onPlay",(function(t){Number(t)<.2&&e.setState({reRenderFlag:!e.state.reRenderFlag})})),e}return(0,l.Z)(w,[{key:"componentDidMount",value:function(){var e=this;this.state.log.on("ready",(function(){console.log("ready"),N=!0,e.ready()})).on("error",console.error).connect(),this.getData()}},{key:"render",value:function(){var e=this.state,t=e.log,n=e.settings,r=e.mapData,a=e.loading,l=(0,y.Ej)(r);return f.createElement("div",{className:"play-wrap"},a?f.createElement("div",{className:"loading-mask"},f.createElement("div",null,"资源加载中，请稍等。。。")):null,f.createElement("div",{id:"play-container"},f.createElement("div",{id:"control-panel"},f.createElement(p.Hk,{log:t,name:"Metrics"}),f.createElement("hr",null),f.createElement(p.Hk,{log:t,name:"Camera"}),f.createElement("hr",null)),f.createElement("div",{id:"log-panel"},f.createElement("div",{id:"map-view",style:{backgroundColor:"lightgray"}},f.createElement(p.nU,{log:t,car:g,xvizStyles:h,showTooltip:n.showTooltip,viewMode:p.WF[n.viewMode],showMap:!1,customLayers:l}),f.createElement("div",{id:"hud"},f.createElement("hr",null),f.createElement("hr",null),f.createElement(p.oi,{log:t,streamName:"/vehicle/acceleration",style:{arcRadius:50},label:"Acceleration",min:-4,max:4}),f.createElement("hr",null),f.createElement(p.oi,{log:t,streamName:"/vehicle/velocity",label:"Speed",getWarning:function(e){return e>6?"FAST":""},min:0,max:20}),f.createElement(p.oi,{log:t,streamName:"/vehicle/throttle",label:"throttle",min:0,max:100}),f.createElement(p.oi,{log:t,streamName:"/vehicle/brake",label:"brake",min:0,max:100}),f.createElement(p.oi,{log:t,streamName:"/vehicle/steering",label:"steering",min:-100,max:100}))),f.createElement("div",{id:"timeline"},f.createElement(p.ko,{width:"100%",log:t,onSeek:this.onPlay,formatTimestamp:function(e){return e}})))))}}]),w}(f.PureComponent)},35457:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(7823),a=n(58061),l=n(96486),o=n.n(l),c=n(80129),i=n.n(c)().parse(o().split(window.location.search,"?")[1]);const s=new r.Po({logGuid:i.fileUrl?"".concat(a.xG,"/download/replay/").concat(i.fileUrl):"none",bufferLength:300,duration:60,serverConfig:{serverUrl:a.LF},worker:!0,maxConcurrency:4})},27639:()=>{},66858:()=>{},69944:()=>{},27603:()=>{}}]);