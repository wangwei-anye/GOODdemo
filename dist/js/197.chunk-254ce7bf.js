"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[197],{49197:(e,a,r)=>{r.r(a),r.d(a,{default:()=>f}),r(52262);var t=r(65400),n=(r(69852),r(97538)),s=(r(67272),r(51024)),l=(r(19373),r(11187)),o=r(15861),u=r(29439),i=r(87757),c=r.n(i),m=r(67294),p=(r(39704),r(80710)),d=(r(80129),r(58061));const f=function(){var e=(0,m.useState)("login"),a=(0,u.Z)(e,2),r=a[0],i=a[1],f=function(){var e=(0,o.Z)(c().mark((function e(a){var r,t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n={username:a.username,password:a.password},void 0,s={method:"POST",body:JSON.stringify(n)},(0,p.Z)("".concat(d.Sg,"/user/login"),s);case 2:r=e.sent,200===(t=r.data).code&&(localStorage.token=t.data,localStorage.userInfo=JSON.stringify({name:a.username}),window.location.href="/case-lib");case 5:case"end":return e.stop()}var n,s}),e)})));return function(a){return e.apply(this,arguments)}}(),w=function(){var e=(0,o.Z)(c().mark((function e(a){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.password===a.passwordTwo){e.next=3;break}return l.default.info("两次输入的密码不一致"),e.abrupt("return");case 3:return e.next=5,r={username:a.username,password:a.password},void 0,t={method:"POST",body:JSON.stringify(r)},(0,p.Z)("".concat(d.Sg,"/user/register"),t);case 5:200===e.sent.data.code&&(l.default.success("注册成功"),g());case 8:case"end":return e.stop()}var r,t}),e)})));return function(a){return e.apply(this,arguments)}}(),g=function(){i("login"===r?"register":"login")};return m.createElement("div",{className:"login-wrap"},"login"===r?m.createElement(m.Fragment,null,m.createElement("div",{className:"title"},"欢迎使用"),m.createElement(n.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{username:"",password:""},onFinish:f,onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off"},m.createElement(n.Z.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"Please input your username!"}]},m.createElement(s.default,null)),m.createElement(n.Z.Item,{label:"密码",name:"password",rules:[{required:!0,message:"Please input your password!"}]},m.createElement(s.default.Password,null)),m.createElement(n.Z.Item,{wrapperCol:{offset:8,span:16}},m.createElement(t.default,{type:"primary",htmlType:"submit"},"登入"),m.createElement("span",{style:{marginLeft:"20px",color:"#1890ff",cursor:"pointer"},onClick:g},"注册")))):m.createElement(m.Fragment,null,m.createElement("div",{className:"title"},"用户注册"),m.createElement(n.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{username:"",password:"",passwordTwo:""},onFinish:w,onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off"},m.createElement(n.Z.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"Please input your username!"}]},m.createElement(s.default,null)),m.createElement(n.Z.Item,{label:"密码",name:"password",rules:[{required:!0,message:"Please input your password!"}]},m.createElement(s.default.Password,null)),m.createElement(n.Z.Item,{label:"确认密码",name:"passwordTwo",rules:[{required:!0,message:"Please input your password!"}]},m.createElement(s.default.Password,null)),m.createElement(n.Z.Item,{wrapperCol:{offset:8,span:16}},m.createElement(t.default,{type:"primary",htmlType:"submit"},"注册"),m.createElement("span",{style:{marginLeft:"20px",color:"#1890ff",cursor:"pointer"},onClick:g},"登入")))))}}}]);